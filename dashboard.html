<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link href="styles/styles.css" rel="stylesheet" />
    <link href="styles/index.css" rel="stylesheet" />
    <title>Welcome</title>
    <style>
      p{
        text-align:center;
      }
    </style>
  </head>
  <body class="container full-height-grow" onload='checkLogin()'>
    <header class="main-header">
      <a href="/" class="brand-logo">
        <img src="images/nus-money-logo.svg" />
        <div class="brand-logo-name">nus money</div>
      </a>
    </header>
    
    <section id="dashboard">
      
      <div id="dashboard_title">
        <h1>My Dashboard</h1>
      </div>

      <div class="account_balance">
        <div class="balance_title">
          <p>My Account Balance</p>
          <p class="value" id="balance"></p>
          </div>
        </div>
      </div>

        <div class="box">
          <button class="btn" onclick="location.href = 'transactions.html'">View My Transaction Details</button>
          <button class="btn" onclick="location.href = 'budgetPlan.html'">Create a new Plan</button>
          <button id="connect_btn" style="float:right">Connect to My Account</button>
        </div>

      <div class="dashboard_expenditures_container">
        
        <div id="dashboard_expenditures_title">
          <h3>Top 5 expenditures of the month</h3>
        </div>

      <div id ="dashboard_container"  class="dashboard_container">
      </div>
      </div>
    </section>

    <script src="scripts/dashboard.js"></script>
    <script>
      function checkLogin() {
        fetch("https://nus-course-backend-5i7iu7m5xa-uc.a.run.app/profile", {
          method: "GET",
          headers: { "Content-Type": "application/json" },
          mode: "cors",
          credentials: "include",
        })
          .then((response) => {
            if (response.status !== 200) {
              location.assign("/");
            }
          })
          .catch((error) => {
            location.assign("/");
          });
      }
    </script>
  </body>
</html>